"use strict";(self.webpackChunkreact_remote_component_example=self.webpackChunkreact_remote_component_example||[]).push([[9],{618:(e,t,r)=>{r.r(t),r.d(t,{default:()=>R});var n={};r.r(n),r.d(n,{default:()=>u});var a={};r.r(a),r.d(a,{default:()=>h});var o={};r.r(o),r.d(o,{default:()=>L});var s={};r.r(s),r.d(s,{default:()=>U});var l=r(783),i=r.n(l),m=r(745);const d=({buttons:e})=>{const t=e.map((e=>i().createElement("button",{className:"buttons-panel__button",title:e.title,onClick:e.onClick},e.name)));return i().createElement("div",{className:"buttons-panel"},t)},c=({api:e})=>{const t=e.getActionsMetadata().map((t=>({name:t.title,title:t.description,onClick(){e.executeAction(t.id)}})));return i().createElement(d,{buttons:t})},u=e=>{const t=(0,m.s)(e.container);return t.render(l.createElement(c,{initialContext:e.initialContext,api:e.api})),Promise.resolve((()=>t.unmount()))};var p=r(793),g=r(266),y=r.n(g),C=r(176),k=r(71),f=r(718);const b={en:{translation:JSON.parse('{"gantt":{"title":"Gantt diagram"},"stringControl":{"label":"Subject"},"performedWorkDetailsGrid":{"columns":{"id":"ID","title":"Title","jobKind":"Job kind","duration":"Duration","comment":"Comment"},"buttons":{"copy":"Copy","remove":"Remove","add":"Add entry"},"summary":{"total":"Total"}}}')},ru:{translation:JSON.parse('{"gantt":{"title":"Диаграмма Ганта"},"stringControl":{"label":"Содержание"},"performedWorkDetailsGrid":{"columns":{"id":"ИД","title":"Наименование","jobKind":"Вид работ","duration":"Часы","comment":"Примечание"},"buttons":{"copy":"Скопировать","remove":"Удалить","add":"Добавить запись"},"summary":{"total":"Итого"}}}')}};let w;w||(w=y().createInstance().use(C.Z).use(k.Z).use(f.Db).init({resources:b,debug:!0,fallbackLng:"en",supportedLngs:["en","ru","en-US","ru-RU"],initImmediate:!1}));const _=[{name:"Организационное собрание",progress:100,start:new Date(2022,1,24,9),end:new Date(2022,1,24,12)},{name:"Разработка документации",progress:45,start:new Date(2022,1,25),end:new Date(2022,1,27)},{name:"Общая схема",progress:70,start:new Date(2022,1,25),end:new Date(2022,1,27)},{name:"Разработка",progress:30,start:new Date(2022,1,25),end:new Date(2022,2,1)},{name:"Внедрение",progress:0,start:new Date(2022,2,1),end:new Date(2022,2,2)},{name:"Итоговый отчет",progress:0,start:new Date(2022,2,3),end:new Date(2022,2,4)},{name:"Итоговое собрание",progress:0,start:new Date(2022,2,5,9),end:new Date(2022,2,5,13)}];var D=r(791);const E=({tasks:e})=>{const{t,i18n:r}=(0,p.$)();return i().createElement("div",{className:"gantt"},i().createElement("div",{className:"gantt__title"},t("gantt.title")),i().createElement(D.A,{tasks:e,locale:r.language,viewMode:D.w.HalfDay}))},v=({initialContext:e,api:t})=>{const[r,n]=l.useState(e),a=r.currentCulture??"en",{i18n:o}=(0,p.$)();l.useEffect((()=>{o.changeLanguage(a)}),[a]);const s=l.useCallback((e=>{n(e)}),[t]);t.onControlUpdate=s;const i=_.map((e=>({start:e.start,end:e.end,name:e.name,id:e.name,type:"task",progress:e.progress,isDisabled:!0,styles:{progressColor:"#ffbb54",progressSelectedColor:"#ff9e0d"}})));return l.createElement(E,{tasks:i})},h=e=>{const t=(0,m.s)(e.container);return t.render(l.createElement(v,{initialContext:e.initialContext,api:e.api})),Promise.resolve((()=>t.unmount()))};var I=r(81);r(921);const N=({row:e})=>{const{t}=(0,p.$)();return i().createElement("button",{className:"preformed-work-details-grid__row-button",onClick:async()=>{const t=e._entity,r=await t.RootEntity.PerformedWorkDetails.addNew();await r.changeProperty("Title",t.Title),await r.changeProperty("Comment",t.Comment??""),await r.changeProperty("Duration",t.Duration),await r.changeProperty("JobKind",t.JobKind)}},t("performedWorkDetailsGrid.buttons.copy"))},x=({row:e})=>{const{t}=(0,p.$)();return i().createElement("button",{className:"preformed-work-details-grid__row-button",onClick:()=>{e._entity.RootEntity.PerformedWorkDetails.remove(e._entity)}},t("performedWorkDetailsGrid.buttons.remove"))},S=e=>e._entity?.Id??-1,P=(e,t)=>{const r=e[t.indexes[0]];let n=r[t.column.key];if("Duration"===t.column.key&&(n=parseInt(n,10),isNaN(n)))throw new Error("Incorrect value.");r._entity?.changeProperty(t.column.key,n)},W=({entity:e})=>{const{t,i18n:r}=(0,p.$)(),n=e.PerformedWorkDetails,a=n.map((e=>e.Duration)).reduce(((e,t)=>e+t),0);const o=t("performedWorkDetailsGrid.summary.total"),[s,l]=i().useState([{Id:o,Duration:a}]);s[0].Duration!==a&&l([{Id:o,Duration:a}]);const m=i().useCallback((async()=>{await n.addNew()}),[n]),d=i().useMemo((()=>[{key:"Id",name:t("performedWorkDetailsGrid.columns.id"),sortable:!0,width:60,summaryCellClass:"preformed-work-details-grid__summary-cell",renderSummaryCell:I.Q2},{key:"Title",name:t("performedWorkDetailsGrid.columns.title"),sortable:!0,summaryCellClass:"preformed-work-details-grid__summary-cell",renderEditCell:I.Ug},{key:"JobKind",name:t("performedWorkDetailsGrid.columns.jobKind"),sortable:!0,summaryCellClass:"preformed-work-details-grid__summary-cell"},{key:"Duration",name:t("performedWorkDetailsGrid.columns.duration"),sortable:!0,summaryCellClass:"preformed-work-details-grid__summary-cell",renderEditCell:I.Ug,renderSummaryCell:I.Q2},{key:"Comment",name:t("performedWorkDetailsGrid.columns.comment"),sortable:!0,summaryCellClass:"preformed-work-details-grid__summary-cell",renderEditCell:I.Ug},{key:"CopyButton",name:"",summaryCellClass:"preformed-work-details-grid__summary-cell",renderCell:N,width:104},{key:"RemoveButton",name:"",summaryCellClass:"preformed-work-details-grid__summary-cell",renderCell:x,width:91}]),[r.language]),c=i().useMemo((()=>n.map((e=>({_entity:e,Id:e.Id,Title:e.Title,JobKind:e.JobKind?.DisplayValue,Duration:e.Duration,Comment:e.Comment})))),[n]);return i().createElement("div",{className:"preformed-work-details-grid"},i().createElement("div",{className:"preformed-work-details-grid__top-buttons"},i().createElement("button",{className:"preformed-work-details-grid__add-new-button",onClick:m},t("performedWorkDetailsGrid.buttons.add"))),i().createElement(I.ZP,{className:"preformed-work-details-grid__grid",columns:d,rows:c,rowKeyGetter:S,bottomSummaryRows:s,onRowsChange:P}))},G=({initialContext:e,api:t})=>{const[r,n]=i().useState(t.getEntity()),[a,o]=i().useState(e),s=a.currentCulture??"en",{i18n:l}=(0,p.$)();i().useEffect((()=>{l.changeLanguage(s)}),[s]);const m=i().useCallback((e=>{const r=t.getEntity();n(r),o(e)}),[t,n]);return t.onControlUpdate=m,i().createElement(W,{entity:r})},L=e=>{const t=(0,m.s)(e.container);return t.render(l.createElement(G,{initialContext:e.initialContext,api:e.api})),Promise.resolve((()=>t.unmount()))};var K=r(29);const J=({label:e,value:t,onChange:r,theme:n,isEnabled:a})=>{const[o,s]=i().useState(t??"");i().useEffect((()=>s(t??"")),[t]);const l=i().useCallback((()=>{o!==t&&r(o)}),[r,t,o]),m=n===K.Theme.Default?"☀":"☾",d="string-control__label"+(a?"":" string-control__label_disabled"),c="string-control__input"+(a?"":" string-control__input_disabled");return i().createElement("div",{className:"string-control"},i().createElement("span",{className:d},m," ",e),i().createElement("input",{className:c,type:"text",value:o,onBlur:l,onChange:e=>s(e.target.value),disabled:!a}))},T=({initialContext:e,api:t,controlInfo:r})=>{const n=r.propertyName;if(!n)throw new Error("propertyName is not defined");const[a,o]=i().useState((()=>t.getEntity())),[s,l]=i().useState(e),m=s.currentCulture??"en",{t:d,i18n:c}=(0,p.$)();i().useEffect((()=>{c.changeLanguage(m)}),[m]);const u=i().useCallback((e=>{o(t.getEntity()),l(e)}),[t,o]);t.onControlUpdate=u;const g=i().useCallback((async e=>{await a.changeProperty(n,e)}),[a]),y=a.LockInfo&&a.LockInfo.IsLocked&&(!a.LockInfo.IsLockedByMe||!a.LockInfo.IsLockedHere),C=a.State.IsEnabled&&!y,k=a.Info.properties.find((e=>e.name===r.propertyName));return i().createElement(J,{label:k?.displayValue??d("stringControl.label"),value:a[n]??void 0,onChange:g,theme:s.theme,isEnabled:C})},U=e=>{const t=(0,m.s)(e.container);return t.render(l.createElement(T,{initialContext:e.initialContext,api:e.api,controlInfo:e.controlInfo})),Promise.resolve((()=>t.unmount()))},R={"actions-panel-cover-loader":n,"gantt-cover-loader":a,"performed-work-details-grid-card-loader":o,"string-control-card-loader":s}}}]);
//# sourceMappingURL=9_1.0_43e087a7.js.map